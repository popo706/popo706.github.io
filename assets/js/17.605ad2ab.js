(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{408:function(s,n,t){"use strict";t.r(n);var e=t(40),a=Object(e.a)({},function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("blockquote",[t("p",[s._v("èƒŒæ™¯ï¼šå…¬å¸æŠ€æœ¯æ¡†æ¶ä¸º spring boot +jpaï¼Œjpa å¯ä»¥å¤„ç†æ­£å¸¸çš„ ä¸šåŠ¡ï¼Œä½†æ˜¯å¯¹äºå¤æ‚çš„ç»Ÿè®¡ä¸šåŠ¡ï¼ˆå°¤å…¶æ¶‰åŠå¯¹å¤šä¸ª"),t("a",{attrs:{href:"https://tongtsewow.gitbooks.io/tongtsesddd/%E7%AC%AC10%E7%AB%A0-%E8%81%9A%E5%90%88.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("èšåˆ"),t("OutboundLink")],1),s._v("çš„å¤æ‚ä¸šåŠ¡ï¼‰ï¼Œjpa è¿‡äºæ¶ˆè€—æ€§èƒ½,æ‰€ä»¥ç ”ç©¶åœ¨ spring boot é¡¹ç›®ä¸­ï¼Œjpa+mybatis ç»„åˆçš„å¯èƒ½æ€§")])]),s._v(" "),t("hr"),s._v(" "),t("h5",{attrs:{id:"jpa-mybatis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jpa-mybatis","aria-hidden":"true"}},[s._v("#")]),s._v(" jpa && mybatis")]),s._v(" "),t("ul",[t("li",[s._v("jpaï¼ˆJava Persistence APIï¼‰ï¼šå¤§å¤§ç®€åŒ–æ•°æ®è®¿é—®å±‚ä»£ç çš„ç¼–ç ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤æ•°æ®çš„æŒä¹…åŒ–ï¼Œæ˜¯é¢å‘å¯¹è±¡çš„")]),s._v(" "),t("li",[s._v("mybatisï¼šæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ï¼Œæ˜¯é¢å‘å…³ç³»çš„")])]),s._v(" "),t("hr"),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/popo706/demo-jpa-mybatis",target:"_blank",rel:"noopener noreferrer"}},[s._v("jpa+mybatis ç»„åˆ demoå®ä¾‹"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"å®æˆ˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å®æˆ˜","aria-hidden":"true"}},[s._v("#")]),s._v(" å®æˆ˜")]),s._v(" "),t("p",[s._v("åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·èŒä½ä¿¡æ¯  ä¸šåŠ¡éœ€æ±‚å¦‚ä¸‹å›¾ï¼š\n"),t("img",{attrs:{src:"/images/tech/frame/position_info.png",alt:"éœ€æ±‚æ•ˆæœ",title:"éœ€æ±‚æ•ˆæœå›¾"}})]),s._v(" "),t("pre",[t("code",[s._v("å…¥å‚æŸ¥è¯¢æ¡ä»¶æ¶‰åŠèšåˆï¼šuser,position,dept\nå‡ºå‚æ•°æ®æ¥æºæ¶‰åŠèšåˆï¼šuser,position,dept,admin,userLastLoginRec\n")])]),s._v(" "),t("h4",{attrs:{id:"jpa-å®ç°ä»£ç "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jpa-å®ç°ä»£ç ","aria-hidden":"true"}},[s._v("#")]),s._v(" jpa å®ç°ä»£ç ")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("     private Page<StatisticsUserDTO> queryStatisticsUserInfo(StatisticsSearchDTO searchDTO, Pageable pageable, boolean isPaging, Long tenantId) {\n          QUser user = QUser.user;\n          QPosition position = QPosition.position;\n          BooleanExpression expression = user.id.isNotNull();\n          BooleanExpression positionExpression = position.id.isNotNull();\n\n          positionExpression = positionExpression.and(position.tenantId.eq(tenantId));\n          if (searchDTO != null) {\n              if (searchDTO.getGroupIds() != null && searchDTO.getGroupIds().length > 0) {\n                  positionExpression = positionExpression.and(position.deptId.in((Number[]) searchDTO.getGroupIds()));\n              }\n              if (!StringUtils.isEmpty(searchDTO.getJobCode())) {\n                  positionExpression = positionExpression.and(position.jobCode.contains(searchDTO.getJobCode()));\n              }\n              if (!StringUtils.isEmpty(searchDTO.getRealName())) {\n                  expression = expression.and(user.realName.contains(searchDTO.getRealName()));\n              }\n              if (!StringUtils.isEmpty(searchDTO.getPhoneNum())) {\n                  expression = expression.and(user.phoneNum.contains(searchDTO.getPhoneNum()));\n              }\n  \n              List<PositionClassificationRec> attrs = searchDTO.getAttrs();\n              //æ ¹æ®èŒä½ç­›é€‰ä¿¡æ¯\n              if (!CollectionUtils.isEmpty(attrs)) {\n                  for (PositionClassificationRec attr : attrs) {\n                      List<Long> positionIds = positionRepository.findAllByAttrsOptions(attr.getClassificationId(), attr.getOptions())\n                              .stream().map(Position::getId).collect(Collectors.toList());\n                      positionExpression = positionExpression.and(position.id.in(QueryPlanCacheOptimizeUtil.convertList(positionIds)));\n                  }\n              }\n          }\n  \n          Iterable<Position> positions = positionRepository.findAll(positionExpression);\n          List<Long> userIds = new ArrayList<>();\n          positions.forEach(position1 -> userIds.add(position1.getUserId()));\n  \n          expression = expression.and(user.id.in(userIds));\n  \n          Page<User> users;\n          if (isPaging) {\n              users = userRepository.findAll(expression, pageable);\n          } else {\n              Pageable pageable1 = null;\n              users = userRepository.findAll(expression, pageable1);\n          }\n  \n          Set<Long> newUserIds = users.getContent().stream().map(AbstractEntity::getId).collect(Collectors.toSet());\n          List<Position> positionsList = positionRepository.findAllByUserIdIn(QueryPlanCacheOptimizeUtil.convertList(newUserIds));\n          Map<Long, Position> positionMap = positionsList.stream().collect(Collectors.toMap(Position::getUserId, c -> c));\n          Set<Long> deptIds = positionsList.stream().map(Position::getDeptId).collect(Collectors.toSet());\n          Map<Long, Dept> deptMap = deptRepository.findAll(deptIds).stream().collect(Collectors.toMap(Dept::getId, c -> c));\n          Map<Long, Long> userLastLoginMap = userLastLoginRecRepository.findAllByUserIdIn(newUserIds)\n                  .stream().collect(Collectors.toMap(UserLastLoginRec::getUserId, UserLastLoginRec::getLastLogin));\n  \n          return users.map(user1 -> {\n              Position curPosition = positionMap.get(user1.getId());\n              Dept curDept = deptMap.get(curPosition.getDeptId());\n              return new StatisticsUserDTO(curPosition, curDept.getName(), user1.getRealName(), user1.getPhoneNum(), userLastLoginMap.get(user1.getId()), user1.getStartWorkTime());\n          });\n      }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br")])]),t("p",[s._v("disadvantage:")]),s._v(" "),t("ul",[t("li",[s._v("æ¶ˆè€—ä¸å¿…è¦çš„æ—¶é—´å’Œæ€§èƒ½")]),s._v(" "),t("li",[s._v("éš¾ä»¥åœ¨ç°æœ‰çš„æ¡†æ¶ä¸Šè¿›è¡Œé‡çº§ä¼˜åŒ–")]),s._v(" "),t("li",[s._v("ä»£ç å¤æ‚åº¦é«˜ï¼Œç»´æŠ¤ä¸æ–¹ä¾¿")]),s._v(" "),t("li",[s._v("jpa æ— æ³•æ§åˆ¶ç”Ÿæˆçš„sql,OneToMany å¯¼è‡´ç”Ÿæˆçš„sql è¿‡åº¦ï¼Œæ¶ˆè€— datasource è¿æ¥æ•°\nï¼ˆæ­¤å¤„ jpa ç”Ÿæˆçš„ sql æ•°é‡ æˆç™¾ä¸Šåƒæ¡ï¼‰")])]),s._v(" "),t("h4",{attrs:{id:"mybatis-å®ç°ä»£ç "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-å®ç°ä»£ç ","aria-hidden":"true"}},[s._v("#")]),s._v(" mybatis å®ç°ä»£ç ")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    <resultMap id="PositionStatisticsInfoMap" type="ky.edu.server.tenant.domain.model.PositionStatisticsInfo">\n            <result property="deptName" column="deptName"></result>\n            <result property="phoneNum" column="phoneNum"></result>\n            <result property="realName" column="realName"></result>\n            <result property="lastLogin" column="lastLogin"></result>\n            <result property="startWorkTime" column="startWorkTime"></result>\n            <association property="position" javaType="ky.edu.server.tenant.domain.model.Position">\n                <id property="id" column="id"></id>\n                <result property="createTime" column="createTime"/>\n                <result property="lastModified" column="lastModified"/>\n                <result property="jobCode" column="jobCode"/>\n                <result property="tenantId" column="tenantId"/>\n                <result property="deptId" column="deptId"/>\n                <result property="accountId" column="accountId"/>\n                <result property="userId" column="userId"/>\n                <result property="admin" column="admin"/>\n                <collection property="internalClassRecs" column="id" select="getInternalClassRecs">\n                    <result property="classificationId" column="classificationId"></result>\n                    <result property="optionId" column="optionId"></result>\n                </collection>\n            </association>\n        </resultMap>\n        \n        <select id="findStatisticsPositionInfos" resultMap="PositionStatisticsInfoMap">\n                select distinct\n                up.id,d.deptName,ru.phoneNum,ru.realName,ullr.lastLogin,ru.startWorkTime,up.id,up.createTime,up.lastModified,up.jobCode,up.tenantId,\n                up.deptId,up.accountId,up.userId,up.admin\n                from user_position up\n                inner join reg_user ru on ru.accountId=up.accountId\n                left join position_class_rec pcr on up.id=pcr.positionId\n                inner join dept d on up.deptId=d.id\n                left join user_last_login_rec ullr on ullr.userId=up.userId\n                where up.tenantId= #{tenantId}\n                <if test="statisticsSearch.realName !=null and statisticsSearch.realName != \'\' ">\n                    and ru.realName REGEXP #{statisticsSearch.realName}\n                </if>\n                <if test="statisticsSearch.phoneNum !=null and  statisticsSearch.phoneNum != \'\' ">\n                    and ru.phoneNum REGEXP #{statisticsSearch.phoneNum}\n                </if>\n                <if test="statisticsSearch.jobCode !=null and statisticsSearch.jobCode != \'\' ">\n                    and up.jobCode REGEXP #{statisticsSearch.jobCode}\n                </if>\n                <if test="statisticsSearch.groupIds !=null and statisticsSearch.groupIds.size !=0">\n                    AND up.deptId in\n                    (<foreach collection="statisticsSearch.groupIds" item="groupId" separator=",">#{groupId}</foreach>)\n                </if>\n                <if test="statisticsSearch.internalClassRecs !=null and statisticsSearch.internalClassRecs.size !=0">\n                    AND (pcr.classificationId,pcr.optionId) in\n                    (<foreach collection="statisticsSearch.internalClassRecs" item="attr" separator=",">\n                    (#{attr.classificationId},#{attr.optionId})</foreach>)\n                </if>\n                order by ru.lastModified desc\n                <if test="offset !=null and perPage!=null">\n                    limit #{offset}, #{perPage}\n                </if>\n            </select>\n            \n            <select id="getInternalClassRecs" resultType="ky.edu.server.common.domain.model.InternalClassRec">\n                    SELECT classificationId,optionId  FROM position_class_rec\n                    WHERE positionId = #{id}\n                </select>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br")])]),t("p",[s._v("advantage:")]),s._v(" "),t("ul",[t("li",[s._v("æ ¹æ®å¤æ‚ç»Ÿè®¡ä¸šåŠ¡å»ºæ¨¡ï¼Œåœ¨æ•°æ®åº“ å±‚é¢ åªæŸ¥è¯¢æœ‰ç”¨æ•°æ®")]),s._v(" "),t("li",[s._v("é™ä½ datasource è¿æ¥æ•°\nï¼ˆæ­¤å¤„sql æ•°é‡ è¿‘ ç™¾æ¡ï¼ŒOneToMany å…³ç³» æ˜ å°„ äº§ç”Ÿçš„ è¿‡åº¦sql ä»ç„¶æ²¡æœ‰è§£å†³ï¼‰")])]),s._v(" "),t("h4",{attrs:{id:"mybatis-å®ç°ä»£ç ï¼ˆé™ä½-datasource-è¿æ¥æ•°ç‰ˆï¼‰"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-å®ç°ä»£ç ï¼ˆé™ä½-datasource-è¿æ¥æ•°ç‰ˆï¼‰","aria-hidden":"true"}},[s._v("#")]),s._v(" mybatis å®ç°ä»£ç ï¼ˆé™ä½ datasource è¿æ¥æ•°ç‰ˆï¼‰")]),s._v(" "),t("p",[s._v("æ˜ å°„å…³ç³»map å»é™¤ internalClassRecs")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    \x3c!--<collection property="internalClassRecs" column="id" select="getInternalClassRecs">--\x3e\n                        \x3c!--<result property="classificationId" column="classificationId"></result>--\x3e\n                        \x3c!--<result property="optionId" column="optionId"></result>--\x3e\n        \x3c!--</collection>--\x3e\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("å¢åŠ  æ‰¹é‡æŸ¥è¯¢ internalClassRecs æ–¹æ³•ï¼š")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    <select id="queryInternalClassRecsByPositionIds" resultType="ky.edu.server.common.domain.model.InternalClassRec">\n            SELECT classificationId,optionId,positionId  FROM position_class_rec\n            WHERE positionId in\n            (<foreach collection="positionIds" item="positionId" separator=",">#{positionId}</foreach>)\n        </select>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("ç„¶å ä¸šåŠ¡å±‚é¢è¿›è¡Œæ•°æ®ç»„è£…ï¼š")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    List<PositionStatisticsInfo> positionInfos = iPositionDao.findStatisticsPositionInfos(searchDTO, tenantId, (long) offset, (long) size);\n    \n            if(CollectionUtils.isEmpty(positionInfos)){\n                return new PageImpl<>(positionInfos, pageRequest, 0);\n            }\n        \n            Set<Long> positionIds = new HashSet<>();\n            positionInfos.forEach(positionStatisticsInfo -> positionIds.add(positionStatisticsInfo.getPosition().getId()));\n    \n            List<InternalClassRec> internalClassRecs = iPositionDao.queryInternalClassRecsByPositionIds(positionIds);\n            Map<Long, Set<InternalClassRec>> internalClassRecMap = MapAssembler.markInternalClassRecAsPositionIdKey(internalClassRecs);\n    \n            Position position;\n            for (PositionStatisticsInfo positionInfo : positionInfos) {\n                position = positionInfo.getPosition();\n                position.initAttrs(internalClassRecMap.get(position.getId()));\n            }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("æ­¤æ–¹æ¡ˆ æŸ¥è¯¢æ•°æ® sql æ•°é‡åªæœ‰ä¸¤æ¡ï¼›")]),s._v(" "),t("h3",{attrs:{id:"ä¼˜åŒ–æ•ˆæœï¼ˆæºæ•°æ®ç›¸åŒï¼ŒæŸ¥è¯¢æ¡ä»¶ç›¸åŒï¼ŒæŸ¥è¯¢ç»“æœä¸€è‡´ï¼‰"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜åŒ–æ•ˆæœï¼ˆæºæ•°æ®ç›¸åŒï¼ŒæŸ¥è¯¢æ¡ä»¶ç›¸åŒï¼ŒæŸ¥è¯¢ç»“æœä¸€è‡´ï¼‰","aria-hidden":"true"}},[s._v("#")]),s._v(" ä¼˜åŒ–æ•ˆæœï¼ˆæºæ•°æ®ç›¸åŒï¼ŒæŸ¥è¯¢æ¡ä»¶ç›¸åŒï¼ŒæŸ¥è¯¢ç»“æœä¸€è‡´ï¼‰")]),s._v(" "),t("ul",[t("li",[s._v("jpa è€—æ—¶ çº¦ 4.5s")]),s._v(" "),t("li",[s._v("mybatis è€—æ—¶ 0.27s")])]),s._v(" "),t("p",[s._v("ğŸ˜ æ—¥å¸¸æ•°æ®çš„å¢åˆ æ”¹æŸ¥ æ¨èjpa,æ— éœ€æ‰‹åŠ¨è¿›è¡Œæ•°æ®å°±æŒä¹…åŒ–ï¼Œå¤æ‚ç»Ÿè®¡ä¸šåŠ¡ æ¨è mybatis,æ ¹æ® éœ€æ±‚ è®¾è®¡ æ¨¡å‹ï¼ŒæŸ¥è¯¢éœ€è¦çš„æ•°æ®ï¼Œæç¤ºç³»ç»Ÿå“åº”é€Ÿåº¦ï¼Œé™ä½æ€§èƒ½æ¶ˆè€—")]),s._v(" "),t("hr"),s._v(" "),t("p",[t("a",{attrs:{href:"https://popo706.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("popoå…ˆç”Ÿçš„åšå®¢"),t("OutboundLink")],1)]),s._v(" "),t("hr")])},[],!1,null,null,null);n.default=a.exports}}]);