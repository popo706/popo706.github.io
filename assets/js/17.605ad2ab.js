(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{408:function(s,n,t){"use strict";t.r(n);var e=t(40),a=Object(e.a)({},function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("blockquote",[t("p",[s._v("背景：公司技术框架为 spring boot +jpa，jpa 可以处理正常的 业务，但是对于复杂的统计业务（尤其涉及对多个"),t("a",{attrs:{href:"https://tongtsewow.gitbooks.io/tongtsesddd/%E7%AC%AC10%E7%AB%A0-%E8%81%9A%E5%90%88.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("聚合"),t("OutboundLink")],1),s._v("的复杂业务），jpa 过于消耗性能,所以研究在 spring boot 项目中，jpa+mybatis 组合的可能性")])]),s._v(" "),t("hr"),s._v(" "),t("h5",{attrs:{id:"jpa-mybatis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jpa-mybatis","aria-hidden":"true"}},[s._v("#")]),s._v(" jpa && mybatis")]),s._v(" "),t("ul",[t("li",[s._v("jpa（Java Persistence API）：大大简化数据访问层代码的编码，无需手动维护数据的持久化，是面向对象的")]),s._v(" "),t("li",[s._v("mybatis：支持定制化 SQL、存储过程以及高级映射，是面向关系的")])]),s._v(" "),t("hr"),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/popo706/demo-jpa-mybatis",target:"_blank",rel:"noopener noreferrer"}},[s._v("jpa+mybatis 组合 demo实例"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"实战"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实战","aria-hidden":"true"}},[s._v("#")]),s._v(" 实战")]),s._v(" "),t("p",[s._v("分页查询用户职位信息  业务需求如下图：\n"),t("img",{attrs:{src:"/images/tech/frame/position_info.png",alt:"需求效果",title:"需求效果图"}})]),s._v(" "),t("pre",[t("code",[s._v("入参查询条件涉及聚合：user,position,dept\n出参数据来源涉及聚合：user,position,dept,admin,userLastLoginRec\n")])]),s._v(" "),t("h4",{attrs:{id:"jpa-实现代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jpa-实现代码","aria-hidden":"true"}},[s._v("#")]),s._v(" jpa 实现代码")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("     private Page<StatisticsUserDTO> queryStatisticsUserInfo(StatisticsSearchDTO searchDTO, Pageable pageable, boolean isPaging, Long tenantId) {\n          QUser user = QUser.user;\n          QPosition position = QPosition.position;\n          BooleanExpression expression = user.id.isNotNull();\n          BooleanExpression positionExpression = position.id.isNotNull();\n\n          positionExpression = positionExpression.and(position.tenantId.eq(tenantId));\n          if (searchDTO != null) {\n              if (searchDTO.getGroupIds() != null && searchDTO.getGroupIds().length > 0) {\n                  positionExpression = positionExpression.and(position.deptId.in((Number[]) searchDTO.getGroupIds()));\n              }\n              if (!StringUtils.isEmpty(searchDTO.getJobCode())) {\n                  positionExpression = positionExpression.and(position.jobCode.contains(searchDTO.getJobCode()));\n              }\n              if (!StringUtils.isEmpty(searchDTO.getRealName())) {\n                  expression = expression.and(user.realName.contains(searchDTO.getRealName()));\n              }\n              if (!StringUtils.isEmpty(searchDTO.getPhoneNum())) {\n                  expression = expression.and(user.phoneNum.contains(searchDTO.getPhoneNum()));\n              }\n  \n              List<PositionClassificationRec> attrs = searchDTO.getAttrs();\n              //根据职位筛选信息\n              if (!CollectionUtils.isEmpty(attrs)) {\n                  for (PositionClassificationRec attr : attrs) {\n                      List<Long> positionIds = positionRepository.findAllByAttrsOptions(attr.getClassificationId(), attr.getOptions())\n                              .stream().map(Position::getId).collect(Collectors.toList());\n                      positionExpression = positionExpression.and(position.id.in(QueryPlanCacheOptimizeUtil.convertList(positionIds)));\n                  }\n              }\n          }\n  \n          Iterable<Position> positions = positionRepository.findAll(positionExpression);\n          List<Long> userIds = new ArrayList<>();\n          positions.forEach(position1 -> userIds.add(position1.getUserId()));\n  \n          expression = expression.and(user.id.in(userIds));\n  \n          Page<User> users;\n          if (isPaging) {\n              users = userRepository.findAll(expression, pageable);\n          } else {\n              Pageable pageable1 = null;\n              users = userRepository.findAll(expression, pageable1);\n          }\n  \n          Set<Long> newUserIds = users.getContent().stream().map(AbstractEntity::getId).collect(Collectors.toSet());\n          List<Position> positionsList = positionRepository.findAllByUserIdIn(QueryPlanCacheOptimizeUtil.convertList(newUserIds));\n          Map<Long, Position> positionMap = positionsList.stream().collect(Collectors.toMap(Position::getUserId, c -> c));\n          Set<Long> deptIds = positionsList.stream().map(Position::getDeptId).collect(Collectors.toSet());\n          Map<Long, Dept> deptMap = deptRepository.findAll(deptIds).stream().collect(Collectors.toMap(Dept::getId, c -> c));\n          Map<Long, Long> userLastLoginMap = userLastLoginRecRepository.findAllByUserIdIn(newUserIds)\n                  .stream().collect(Collectors.toMap(UserLastLoginRec::getUserId, UserLastLoginRec::getLastLogin));\n  \n          return users.map(user1 -> {\n              Position curPosition = positionMap.get(user1.getId());\n              Dept curDept = deptMap.get(curPosition.getDeptId());\n              return new StatisticsUserDTO(curPosition, curDept.getName(), user1.getRealName(), user1.getPhoneNum(), userLastLoginMap.get(user1.getId()), user1.getStartWorkTime());\n          });\n      }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br")])]),t("p",[s._v("disadvantage:")]),s._v(" "),t("ul",[t("li",[s._v("消耗不必要的时间和性能")]),s._v(" "),t("li",[s._v("难以在现有的框架上进行量级优化")]),s._v(" "),t("li",[s._v("代码复杂度高，维护不方便")]),s._v(" "),t("li",[s._v("jpa 无法控制生成的sql,OneToMany 导致生成的sql 过度，消耗 datasource 连接数\n（此处 jpa 生成的 sql 数量 成百上千条）")])]),s._v(" "),t("h4",{attrs:{id:"mybatis-实现代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-实现代码","aria-hidden":"true"}},[s._v("#")]),s._v(" mybatis 实现代码")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    <resultMap id="PositionStatisticsInfoMap" type="ky.edu.server.tenant.domain.model.PositionStatisticsInfo">\n            <result property="deptName" column="deptName"></result>\n            <result property="phoneNum" column="phoneNum"></result>\n            <result property="realName" column="realName"></result>\n            <result property="lastLogin" column="lastLogin"></result>\n            <result property="startWorkTime" column="startWorkTime"></result>\n            <association property="position" javaType="ky.edu.server.tenant.domain.model.Position">\n                <id property="id" column="id"></id>\n                <result property="createTime" column="createTime"/>\n                <result property="lastModified" column="lastModified"/>\n                <result property="jobCode" column="jobCode"/>\n                <result property="tenantId" column="tenantId"/>\n                <result property="deptId" column="deptId"/>\n                <result property="accountId" column="accountId"/>\n                <result property="userId" column="userId"/>\n                <result property="admin" column="admin"/>\n                <collection property="internalClassRecs" column="id" select="getInternalClassRecs">\n                    <result property="classificationId" column="classificationId"></result>\n                    <result property="optionId" column="optionId"></result>\n                </collection>\n            </association>\n        </resultMap>\n        \n        <select id="findStatisticsPositionInfos" resultMap="PositionStatisticsInfoMap">\n                select distinct\n                up.id,d.deptName,ru.phoneNum,ru.realName,ullr.lastLogin,ru.startWorkTime,up.id,up.createTime,up.lastModified,up.jobCode,up.tenantId,\n                up.deptId,up.accountId,up.userId,up.admin\n                from user_position up\n                inner join reg_user ru on ru.accountId=up.accountId\n                left join position_class_rec pcr on up.id=pcr.positionId\n                inner join dept d on up.deptId=d.id\n                left join user_last_login_rec ullr on ullr.userId=up.userId\n                where up.tenantId= #{tenantId}\n                <if test="statisticsSearch.realName !=null and statisticsSearch.realName != \'\' ">\n                    and ru.realName REGEXP #{statisticsSearch.realName}\n                </if>\n                <if test="statisticsSearch.phoneNum !=null and  statisticsSearch.phoneNum != \'\' ">\n                    and ru.phoneNum REGEXP #{statisticsSearch.phoneNum}\n                </if>\n                <if test="statisticsSearch.jobCode !=null and statisticsSearch.jobCode != \'\' ">\n                    and up.jobCode REGEXP #{statisticsSearch.jobCode}\n                </if>\n                <if test="statisticsSearch.groupIds !=null and statisticsSearch.groupIds.size !=0">\n                    AND up.deptId in\n                    (<foreach collection="statisticsSearch.groupIds" item="groupId" separator=",">#{groupId}</foreach>)\n                </if>\n                <if test="statisticsSearch.internalClassRecs !=null and statisticsSearch.internalClassRecs.size !=0">\n                    AND (pcr.classificationId,pcr.optionId) in\n                    (<foreach collection="statisticsSearch.internalClassRecs" item="attr" separator=",">\n                    (#{attr.classificationId},#{attr.optionId})</foreach>)\n                </if>\n                order by ru.lastModified desc\n                <if test="offset !=null and perPage!=null">\n                    limit #{offset}, #{perPage}\n                </if>\n            </select>\n            \n            <select id="getInternalClassRecs" resultType="ky.edu.server.common.domain.model.InternalClassRec">\n                    SELECT classificationId,optionId  FROM position_class_rec\n                    WHERE positionId = #{id}\n                </select>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br")])]),t("p",[s._v("advantage:")]),s._v(" "),t("ul",[t("li",[s._v("根据复杂统计业务建模，在数据库 层面 只查询有用数据")]),s._v(" "),t("li",[s._v("降低 datasource 连接数\n（此处sql 数量 近 百条，OneToMany 关系 映射 产生的 过度sql 仍然没有解决）")])]),s._v(" "),t("h4",{attrs:{id:"mybatis-实现代码（降低-datasource-连接数版）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-实现代码（降低-datasource-连接数版）","aria-hidden":"true"}},[s._v("#")]),s._v(" mybatis 实现代码（降低 datasource 连接数版）")]),s._v(" "),t("p",[s._v("映射关系map 去除 internalClassRecs")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    \x3c!--<collection property="internalClassRecs" column="id" select="getInternalClassRecs">--\x3e\n                        \x3c!--<result property="classificationId" column="classificationId"></result>--\x3e\n                        \x3c!--<result property="optionId" column="optionId"></result>--\x3e\n        \x3c!--</collection>--\x3e\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("增加 批量查询 internalClassRecs 方法：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    <select id="queryInternalClassRecsByPositionIds" resultType="ky.edu.server.common.domain.model.InternalClassRec">\n            SELECT classificationId,optionId,positionId  FROM position_class_rec\n            WHERE positionId in\n            (<foreach collection="positionIds" item="positionId" separator=",">#{positionId}</foreach>)\n        </select>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("然后 业务层面进行数据组装：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    List<PositionStatisticsInfo> positionInfos = iPositionDao.findStatisticsPositionInfos(searchDTO, tenantId, (long) offset, (long) size);\n    \n            if(CollectionUtils.isEmpty(positionInfos)){\n                return new PageImpl<>(positionInfos, pageRequest, 0);\n            }\n        \n            Set<Long> positionIds = new HashSet<>();\n            positionInfos.forEach(positionStatisticsInfo -> positionIds.add(positionStatisticsInfo.getPosition().getId()));\n    \n            List<InternalClassRec> internalClassRecs = iPositionDao.queryInternalClassRecsByPositionIds(positionIds);\n            Map<Long, Set<InternalClassRec>> internalClassRecMap = MapAssembler.markInternalClassRecAsPositionIdKey(internalClassRecs);\n    \n            Position position;\n            for (PositionStatisticsInfo positionInfo : positionInfos) {\n                position = positionInfo.getPosition();\n                position.initAttrs(internalClassRecMap.get(position.getId()));\n            }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("此方案 查询数据 sql 数量只有两条；")]),s._v(" "),t("h3",{attrs:{id:"优化效果（源数据相同，查询条件相同，查询结果一致）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化效果（源数据相同，查询条件相同，查询结果一致）","aria-hidden":"true"}},[s._v("#")]),s._v(" 优化效果（源数据相同，查询条件相同，查询结果一致）")]),s._v(" "),t("ul",[t("li",[s._v("jpa 耗时 约 4.5s")]),s._v(" "),t("li",[s._v("mybatis 耗时 0.27s")])]),s._v(" "),t("p",[s._v("😏 日常数据的增删改查 推荐jpa,无需手动进行数据就持久化，复杂统计业务 推荐 mybatis,根据 需求 设计 模型，查询需要的数据，提示系统响应速度，降低性能消耗")]),s._v(" "),t("hr"),s._v(" "),t("p",[t("a",{attrs:{href:"https://popo706.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("popo先生的博客"),t("OutboundLink")],1)]),s._v(" "),t("hr")])},[],!1,null,null,null);n.default=a.exports}}]);