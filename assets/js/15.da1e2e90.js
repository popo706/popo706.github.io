(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{403:function(t,e,o){"use strict";o.r(e);var r=o(40),n=Object(r.a)({},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("blockquote",[o("p",[t._v("背景：需要实现 任务流程 流转时推送小程序模板消息，但 微信小程序 推送模板消息 必须 需要 formId，探究其可行性。")])]),t._v(" "),o("p",[o("img",{attrs:{src:"/images/tech/applet/applet_send_message.jpg",alt:"业务图例",title:"业务图例"}})]),t._v(" "),o("p",[t._v('任务 状态发生变更时，需要 向任务创建者 发送消息，比如：点击 "推送给工程师"，需要向 popo 显示发送消息\n但是 B 点击按钮操作，向 A 发送消息，微信小程序不允许此操作，formId 必须和 触发操作的用户相关才有效。\ngitgit')]),t._v(" "),o("ul",[o("li",[t._v("解决方案：\nA 在创建任务的时候 多次记录 其 formId，进行持久化，并记录其有效时间，B 向A 推送消息时，获取 有效的 A 的 formId 进行推送消息；")]),t._v(" "),o("li",[t._v("缺陷（以下情况可能收不到推送消息）：\n"),o("ol",[o("li",[t._v("A 的formId 全部过期（formId 有效期7d）")]),t._v(" "),o("li",[t._v("推送消息时，缺失 接收人的 formId")])])])]),t._v(" "),o("hr"),t._v(" "),o("p",[o("a",{attrs:{href:"https://popo706.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("popo先生的博客"),o("OutboundLink")],1)]),t._v(" "),o("hr")])},[],!1,null,null,null);e.default=n.exports}}]);